<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="./images/index/webIcon.png" type="image/x-icon" />
    <link rel="stylesheet" href="./css/tour.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css"
        integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v9.0"
        nonce="2JLZxLTK"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.0.1/vue.js"></script>
    <title>瀏覽揪團</title>

</head>

<body>
    @@include('layout/leaf.html')
    @@include('layout/nav.html')
    <div class="banner">
        <h2>茶園揪團</h2>
    </div>
    <div class="choice_block">
        <div class="flex">
            <div class="twMap">
                <div class="twMap_img">
                    <img src="./images/tour/twMap.png" alt="">
                </div>
                <button id="allLocal">全部地區</button>
                <button id="nLocal">北部地區</button>
                <button id="cLocal">中部地區</button>
                <button id="sLocal">南部地區</button>
                <div class="location1 location">
                    <img class="locationImg" src="./images/common/location.png" alt="">
                </div>
                <div class="location10 location">
                    <img class="locationImg" src="./images/common/location.png" alt="">
                </div>
                <div class="location7 location">
                    <img class="locationImg" src="./images/common/location.png" alt="">
                </div>
                <div class="location6 location">
                    <img class="locationImg" src="./images/common/location.png" alt="">
                </div>
                <div class="location5 location">
                    <img class="locationImg" src="./images/common/location.png" alt="">
                </div>
                <div class="location9 location">
                    <img class="locationImg" src="./images/common/location.png" alt="">
                </div>
                <div class="location2 location">
                    <img class="locationImg" src="./images/common/location.png" alt="">
                </div>

                <div class="location4 location">
                    <img class="locationImg" src="./images/common/location.png" alt="">
                </div>
                <div class="location3 location">
                    <img class="locationImg" src="./images/common/location.png" alt="">
                </div>

                <div class="location8 location">
                    <img class="locationImg" src="./images/common/location.png" alt="">
                </div>


            </div>
            <!-- <img src="../images/index/notuse/8355.png" alt=""> -->
        </div>
        <div class="tour_center_img">
            <img src="./images/tour/bg-project-map-illust.png" alt="">
        </div>
        <div class="tour_center_img2">
            <img src="./images/index/bg-green-top.png" alt="">
        </div>

    </div>
    <div class="main_body" id="app">
        <h1>瀏覽揪團</h1>
        <div class="choice_list">
            <ul>
                <li @click="content='all'">
                    <h2>全部揪團</h2>
                </li>
                <li class="mini_choice">
                    <h2>揪團地區 <i class="fas fa-angle-down" fa-4x></i></h2>
                    <ul>
                        <li @click="content='north';filter='北部'">北部</li>
                        <li @click="content='north';filter='中部'">中部</li>
                        <li @click="content='north';filter='南部'">南部</li>
                    </ul>
                </li>
                <li>
                    <h2>茶園類型 <i class=" fas fa-angle-down" fa-4x></i></h2>
                    <ul>
                        <li @click="content='type';filter=0">觀光型</li>
                        <li @click="content='type';filter=1">體驗型</li>
                    </ul>
                </li>
                <li>
                    <h2>預估費用 <i class="fas fa-angle-down" fa-4x></i></h2>
                    <ul>
                        <li @click="content='price';filter=2000">2000以下</li>
                        <li @click="content='price';filter=3000">3000以下</li>
                    </ul>
                </li>
            </ul>
        </div>


        <component :is="content" :tours="tourRows" :filter="filter"></component>

    </div>

    @@include('layout/footer.html')


    <div id="fb-root"></div>

    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v9.0"
        nonce="2JLZxLTK"></script>
    <script src="./js/like.js"></script>
    <script src="./js/01_tour_topLocation.js"></script>
    <script>
        window.addEventListener("load", function () {
            //============去server端拿茶園資料
            let TourRows;
            let xhr = new XMLHttpRequest();
            xhr.onload = function () {
                app.tourRows = JSON.parse(xhr.responseText);
                console.log(app.tourRows);
            }
            xhr.open("get", "./phps/getTour.php", true);
            xhr.send(null);
        })

        Vue.component('all', {
            props: ['tours'],

            methods: {

            },
            template: `
        <div class="tour_browse" id="tourBrowseBlock">
            <div class="tour_block" id="tourBlock" v-for="tourRow in tours" >
                <div class="tour_img">
                    <p>{{tourRow.TOUR_TITLE}}</p>
                    <p>{{tourRow.TOUR_SETOFFTIME}} 開團</p>
                    <img :src="tourRow.TOUR_IMG" alt="">
                </div>

                <div class="love_share">
                    <div class="love">
                        <img class="like" src="./images/common/heart.png" title="加入收藏" alt="">
                    </div>
                    <div class="share">
                        <div class="fb-share-button" data-href="https://www.youtube.com/watch?v=HDhltQ4Jx0o"
                            data-layout="button_count" data-size="small"><a target="_blank"
                                href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DHDhltQ4Jx0o&amp;src=sdkpreparse"
                                class="fb-xfbml-parse-ignore">分享</a></div>
                    </div>
                </div>
                <div class="tour_text">
                    <div class="deadline">
                        <h3>截止揪團日期</h3>
                        <p>{{tourRow.DEADLINE_DATE}}</p>
                    </div>
                    <div class="price">
                        <h3>預估費用</h3>
                        <p>NT{{tourRow.GARD_PRICE}}</p>
                    </div>
                    <div class="ink">
                        <div class="ink_bg"></div>
                        <div class="inkText">
                            <h3>剩餘名額</h3>
                            <p>{{tourRow.NUM_OF_PARTICIPANTS}}/{{tourRow.TOUR_PEOPLE}}</p>
                        </div>
                    </div>
                </div>
                <div class="tourBtn">
                    <button type="button">
                        <a :href="'02_tour_more.html?TOUR_ID=' + tourRow.TOUR_ID"> 立即報名</a>
                    </button>
                </div>

            </div>
        </div>
            
            `,
        })

        Vue.component('north', {
            props: ['tours', 'filter'],

            methods: {

            },
            template: `
        <div class="tour_browse" id="tourBrowseBlock">
            <div class="tour_block" id="tourBlock" v-for="tourRow in tours" v-show="tourRow.GARD_LOCATE==filter">
                <div class="tour_img">
                    <p>{{tourRow.TOUR_TITLE}}</p>
                    <p>{{tourRow.TOUR_SETOFFTIME}} 開團</p>
                    <img :src="tourRow.TOUR_IMG" alt="">
                </div>

                <div class="love_share">
                    <div class="love">
                        <img class="like" src="./images/common/heart.png" title="加入收藏" alt="">
                    </div>
                    <div class="share">
                        <div class="fb-share-button" data-href="https://www.youtube.com/watch?v=HDhltQ4Jx0o"
                            data-layout="button_count" data-size="small"><a target="_blank"
                                href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DHDhltQ4Jx0o&amp;src=sdkpreparse"
                                class="fb-xfbml-parse-ignore">分享</a></div>
                    </div>
                </div>
                <div class="tour_text">
                    <div class="deadline">
                        <h3>截止揪團日期</h3>
                        <p>{{tourRow.DEADLINE_DATE}}</p>
                    </div>
                    <div class="price">
                        <h3>預估費用</h3>
                        <p>NT{{tourRow.GARD_PRICE}}</p>
                    </div>
                    <div class="ink">
                        <div class="ink_bg"></div>
                        <div class="inkText">
                            <h3>剩餘名額</h3>
                            <p>{{tourRow.NUM_OF_PARTICIPANTS}}/{{tourRow.TOUR_PEOPLE}}</p>
                        </div>
                    </div>
                </div>
                <div class="tourBtn">
                    <button type="button">
                        <a :href="'02_tour_more.html?TOUR_ID=' + tourRow.TOUR_ID"> 立即報名</a>
                    </button>
                </div>

            </div>
        </div>
            
            `,
        })

        Vue.component('type', {
            props: ['tours', 'filter'],

            methods: {

            },
            template: `
        <div class="tour_browse" id="tourBrowseBlock">
            <div class="tour_block" id="tourBlock" v-for="tourRow in tours" v-show="tourRow.GARD_TYPE==filter">
                <div class="tour_img">
                    <p>{{tourRow.TOUR_TITLE}}</p>
                    <p>{{tourRow.TOUR_SETOFFTIME}} 開團</p>
                    <img :src="tourRow.TOUR_IMG" alt="">
                </div>

                <div class="love_share">
                    <div class="love">
                        <img class="like" src="./images/common/heart.png" title="加入收藏" alt="">
                    </div>
                    <div class="share">
                        <div class="fb-share-button" data-href="https://www.youtube.com/watch?v=HDhltQ4Jx0o"
                            data-layout="button_count" data-size="small"><a target="_blank"
                                href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DHDhltQ4Jx0o&amp;src=sdkpreparse"
                                class="fb-xfbml-parse-ignore">分享</a></div>
                    </div>
                </div>
                <div class="tour_text">
                    <div class="deadline">
                        <h3>截止揪團日期</h3>
                        <p>{{tourRow.DEADLINE_DATE}}</p>
                    </div>
                    <div class="price">
                        <h3>預估費用</h3>
                        <p>NT{{tourRow.GARD_PRICE}}</p>
                    </div>
                    <div class="ink">
                        <div class="ink_bg"></div>
                        <div class="inkText">
                            <h3>剩餘名額</h3>
                            <p>{{tourRow.NUM_OF_PARTICIPANTS}}/{{tourRow.TOUR_PEOPLE}}</p>
                        </div>
                    </div>
                </div>
                <div class="tourBtn">
                    <button type="button">
                        <a :href="'02_tour_more.html?TOUR_ID=' + tourRow.TOUR_ID"> 立即報名</a>
                    </button>
                </div>

            </div>
        </div>
            
            `,
        })

        Vue.component('price', {
            props: ['tours', 'filter'],

            methods: {

            },
            template: `
        <div class="tour_browse" id="tourBrowseBlock">
            <div class="tour_block" id="tourBlock" v-for="tourRow in tours" v-show="tourRow.GARD_PRICE<=filter">
                <div class="tour_img">
                    <p>{{tourRow.TOUR_TITLE}}</p>
                    <p>{{tourRow.TOUR_SETOFFTIME}} 開團</p>
                    <img :src="tourRow.TOUR_IMG" alt="">
                </div>

                <div class="love_share">
                    <div class="love">
                        <img class="like" src="./images/common/heart.png" title="加入收藏" alt="">
                    </div>
                    <div class="share">
                        <div class="fb-share-button" data-href="https://www.youtube.com/watch?v=HDhltQ4Jx0o"
                            data-layout="button_count" data-size="small"><a target="_blank"
                                href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DHDhltQ4Jx0o&amp;src=sdkpreparse"
                                class="fb-xfbml-parse-ignore">分享</a></div>
                    </div>
                </div>
                <div class="tour_text">
                    <div class="deadline">
                        <h3>截止揪團日期</h3>
                        <p>{{tourRow.DEADLINE_DATE}}</p>
                    </div>
                    <div class="price">
                        <h3>預估費用</h3>
                        <p>NT{{tourRow.GARD_PRICE}}</p>
                    </div>
                    <div class="ink">
                        <div class="ink_bg"></div>
                        <div class="inkText">
                            <h3>剩餘名額</h3>
                            <p>{{tourRow.NUM_OF_PARTICIPANTS}}/{{tourRow.TOUR_PEOPLE}}</p>
                        </div>
                    </div>
                </div>
                <div class="tourBtn">
                    <button type="button">
                        <a :href="'02_tour_more.html?TOUR_ID=' + tourRow.TOUR_ID"> 立即報名</a>
                    </button>
                </div>

            </div>
        </div>
            
            `,
        })

        var app = new Vue({
            el: "#app",
            data: {
                content: "all",
                tourRows: [],
                showTour: "",
                filter: "",
            },
            methods: {},
        })


    </script>


</body>

</html>