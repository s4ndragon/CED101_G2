<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>訂單明細</title>
    <link rel="stylesheet" href="./css/shopping.css">
    <link rel="stylesheet" href="./css/checkout.css">
    <script src="./js/checkout.js"></script>
</head>

<body>
    @@include('layout/nav.html')
    @@include('layout/title.html',{'title':'結帳'})
    <form action="./phps/sendorderList.php" method="POST" id='orderform'>
        <div class="main">
            <h3 class="partTitle">訂單內容:</h3>
            <input type="hidden" name="addItemList" id='addItemList'>
            <ul id="items">
            </ul>
            <input type="hidden" name="mem_no" value="1">
            <table>
                <tr>
                    <td>商品總額:</td>
                    <td><input type="number" name="amount" id="amount" class="info" readonly="value"></td>
                </tr>
                <tr>
                    <td>折扣金額:</td>
                    <td><input type="number" name="discount" id="discount" readonly="value" class="info"></td>
                </tr>
                <tr>
                    <td>應付金額:</td>
                    <td><input type="number" id="total" name="total" readonly="value"></td>
                </tr>
                <tr>
                    <td>寄送方式:</td>
                    <td><input type="text" name="delivery" class="info" readonly="value"></td>
                </tr>
                <tr>
                    <td>收件人:</td>
                    <td><input type="text" name="reciever" readonly="value" class="info"></td>
                </tr>
                <tr>
                    <td>收件地址:</td>
                    <td><input type="text" name="address" readonly="value" class="info"></td>
                </tr>
                <tr>
                    <td>收件人電話:</td>
                    <td><input type="number" name="phone" readonly="value" class="info"></td>
                </tr>
                <tr>
                    <td>付款方式:</td>
                    <td><input type="text" name="pay" class="info" readonly="value"></td>
                </tr>
                <tr>
                    <td colspan="2" class="btn">
                        <input type="button" value="取消訂單"
                            onClick="if (confirm('確定取消？'))location.href= './04_shopping.html';return false;">
                        <input type="submit" value="送出訂單" onClick=" if (confirm('是否確認提交？')) clearStorage()">
                    </td>
                </tr>
            </table>
        </div>
        <script>
            function clearStorage() {
                let storage = sessionStorage,
                    ItemList = storage['addItemList'].split(',');
                document.getElementById('addItemList').value = storage['addItemList'];
                console.log(ItemList)
                for (let i = 0; i < ItemList.length - 1; i++) {
                    storage.removeItem(ItemList[i]);
                }
                storage.removeItem('amount');
                storage.removeItem('discount');
                storage.removeItem('addItemList');
            }
        </script>
    </form>
    @@include('layout/footer.html')
</body>

</html>