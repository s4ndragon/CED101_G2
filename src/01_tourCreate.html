<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>建立揪團-選擇搭配地點</title>
    <link rel="shortcut icon" href="./images/index/webIcon.png" type="image/x-icon" />
    <link rel="stylesheet" href="./css/tourCreate.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css"
        integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">
    <script src="../node_modules/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/vue-star-rating@1.5.1/dist/star-rating.min.js"></script>
</head>

<body>

    @@include('layout/nav.html')
    <div class="banner">
        <div>
            <h1>建立揪團</h1>
        </div>
    </div>

    <div id="tourCreate">
        <h1>選擇搭配行程</h1>
        <div class="createStep">
            <ul>
                <li class="t1" :style="t1styleChange">地點</li>
                <li class="a1"></li>
                <li class="t2" :style="t2styleChange">住宿</li>
                <li class="a2"></li>
                <li class="t3" :style="t3styleChange">餐廳</li>
                <li class="a3"></li>
                <li class="t4" :style="t4styleChange">活動</li>
            </ul>
        </div>



        <div class="tourCreate_main">
            <h2>{{title}}</h2>
            <div class="tourCreate_leftside" id="tourCreate">
                <component :is="content" @click-plus-location="goToHotel()" @click-plus-hotel="goToRest()"
                    @click-plus-rest="goToActive()" @click-plus-rest1="showRest1()" @click-plus-rest2="showRest2()"
                    @click-plus-active="goToNext()" @show-light-box="showBox()">
                </component>
            </div>
        </div>
        <!-- ======================================================== -->



        <!-- =======================行程清單========================== -->
        <div class="tourCreate_rightside_block">
            <h3>行程明細</h3>
            <div class="tourCreate_rightside">
                <div class="rightside">
                    <h3>地點 <button @click="removeLocationStorage()">修改</button></h3>
                    <input disabled v-model=locationList>
                </div>
                <div class="rightside">
                    <h3>住宿 <button @click="removeHotelStorage()">修改</button></h3>
                    <input disabled v-model=hotelList>
                </div>
                <div class="rightside">
                    <h3>餐廳 <button @click="removeRestStorage()">修改</button></h3>
                    <input disabled v-model=restList1>
                    <input disabled v-model=restList2>
                    <input disabled v-model=restList3>
                </div>
                <div class="rightside">
                    <h3>活動 <button @click="removeActiveStorage()">修改</button></h3>
                    <input disabled v-model=activeList>
                </div>
            </div>
            <div class="nextBtn" v-show="ok"><button><a href="./01_tourCreateInfro.html">下一步</a></button></div>
        </div>



        <!-- =======================lightbox================================= -->
        <div class="create_lightBox_mask" id="lightBox" v-show="lightBox">
            <div class="create_lightBox">
                <div class="garden">
                    <img class="gpic" src="images/vote/tea5.jpg">
                </div>
                <div class="ginfo">
                    <div class="s1">
                        <p class="p1">舞鶴茶園</p>
                    </div>
                    <div class="allscore app" id="app">
                        <span class="score">
                            總分:&ensp;
                        </span>
                        <div>
                            <star-rating :rating="4.7" :read-only="true" :increment="0.01" :star-size="25">
                            </star-rating>
                        </div>
                    </div>
                    <p class="p4">
                        <span class="tt">茶園地址:</span> 花蓮縣瑞穗鄉舞鶴村
                    </p>
                    <p class="p5">
                        海拔100至300公尺的舞鶴台地，依傍高聳的中央山脈，隨風拂來秀姑巒溪與紅葉溪的濕潤水氣，宜人的氣候適合茶樹生長，是天鶴茶的產地，也是小葉綠蟬生長的天堂，經由小葉綠蟬吸吮而製成的蜜香紅茶，微帶淡淡的果香與蜜香，口感溫潤生津，獨特的風味聞名全臺，成為旅人來訪瑞穗必帶的伴手禮之一。
                    </p>
                    <div class="addActBtn">
                        <button id="addAct">加入行程</button>
                    </div>

                </div>
                <button id="close_lightBox" @click="closeBox()">X</button>

            </div>
        </div>
    </div>



    @@include('layout/footer.html')
    <script>


    </script>
    <script>
        let storage = sessionStorage;
        let prodRows;
        //============去server端拿資料
        let xhr = new XMLHttpRequest();
        xhr.onload = function () {

            app.prodRows = JSON.parse(xhr.responseText);
            console.log(app.prodRows);
        }
        xhr.open("get", "./phps/getLocation.php", true);
        xhr.send(null);

        Vue.component('tea', {

            data() {
                return {
                    inputVlaue: "舞鶴茶園",
                }
            },
            methods: {
                storagelocation(inputVlaue) {
                    storage['location'] = inputVlaue;
                    this.$emit('click-plus-location');
                },
                showLightBox() {
                    this.$emit('show-light-box');
                }
            },
            template: `
            <div class="tourCreate_item_block" id="tea" >
            <div class="tourCreate_item">
                <div class="tourCreate_item_img">
                    <img src="images/vote/hotel.jpg" alt="">
                </div>
                <div class="tourCreate_item_text">
                    <h3>瑞穗天合國際觀光酒店</h3>
                    <p>整體設計以南歐莊園風格為主，風光明媚的山水以及豐富的人文及自然生態，將花蓮瑞穗美景盡收眼底。</p>
                    <div class="viewBtn">
                        <button class="viewBtn" @click="showLightBox()">預覽</button>
                    </div>
                </div>
                <div class="add" @click="storagelocation(inputVlaue)"><img src="./images/tour/add.png" alt="">
                </div>
                <input type="hidden" v-model="inputVlaue">
            </div>
            <div class="tourCreate_item">
                <div class="tourCreate_item_img">
                    <img src="images/vote/hotel.jpg" alt="">
                </div>
                <div class="tourCreate_item_text">
                    <h3>瑞穗天合國際觀光酒店</h3>
                    <p>整體設計以南歐莊園風格為主，風光明媚的山水以及豐富的人文及自然生態，將花蓮瑞穗美景盡收眼底。</p>
                    <div class="viewBtn">
                        <button>預覽</button>
                    </div>
                </div>
                <div class="add"><img src="./images/tour/add.png" alt=""></div>
            </div>
        </div>
            `,
            mounted() {

            }
        });
        Vue.component('hotel', {
            data() {
                return {
                    inputVlaue: "瑞穗天合國際觀光酒店",
                }
            },
            methods: {
                storagelocation(inputVlaue) {
                    storage['hotel'] = inputVlaue;
                    this.$emit('click-plus-hotel');
                },
                showLightBox() {
                    this.$emit('show-light-box');
                }
            },
            template: `
            <div class="tourCreate_item_block" id="hotel">
            <div class="tourCreate_item">
                <div class="tourCreate_item_img">
                    <img src="images/vote/hotel.jpg" alt="">
                </div>
                <div class="tourCreate_item_text">
                    <h3>觀光酒店</h3>
                    <p>整體設計以南歐莊園風格為主，風光明媚的山水以及豐富的人文及自然生態，將花蓮瑞穗美景盡收眼底。</p>
                    <div class="viewBtn">
                        <button class="viewBtn" @click="showLightBox()">預覽</button>
                    </div>
                </div>
                <div class="add" @click="storagelocation(inputVlaue)"><img src="./images/tour/add.png" alt="">
                </div>
                <input type="hidden" v-model="inputVlaue">
            </div>
        </div>
            `,
        });
        var jsonStr = '[{"name": "a餐廳"}, {"name": "B餐廳"}, {"name": "c餐廳"}]';
        Vue.component('rest', {
            data() {
                return {
                    inputVlaue: JSON.parse(jsonStr)
                }
            },
            methods: {
                storagelocation(name) {
                    if (storage.getItem('rest1') && storage.getItem('rest2') == undefined) {
                        console.log(storage['rest2']);
                        storage['rest2'] = name;
                        this.$emit('click-plus-rest2');

                    } else if (storage.getItem('rest2')) {
                        storage['rest3'] = name;
                        this.$emit('click-plus-rest');
                    } else {
                        storage['rest1'] = name;
                        this.$emit('click-plus-rest1');
                    }
                },
                showLightBox() {
                    this.$emit('show-light-box');
                },
            },
            template: `
            <div class="tourCreate_item_block" id="rest" >
            <div class="tourCreate_item" v-for="a in inputVlaue">
                <div class="tourCreate_item_img">
                    <img src="images/vote/hotel.jpg" alt="">
                </div>
                <div class="tourCreate_item_text">
                    <h3>{{a.name}}</h3>
                    <p>整體設計以南歐莊園風格為主，風光明媚的山水以及豐富的人文及自然生態，將花蓮瑞穗美景盡收眼底。</p>
                    <div class="viewBtn">
                        <button class="viewBtn" @click="showLightBox()">預覽</button>
                    </div>
                </div>
                <div class="add" @click="storagelocation(a.name)"><img src="./images/tour/add.png" alt=""></div>
            </div>
        </div>
            `,
        });
        Vue.component('active', {
            data() {
                return {
                    inputVlaue: "傳統採茶體驗",
                }
            },
            methods: {
                storageActive(inputVlaue) {
                    storage['active'] = inputVlaue;
                    this.$emit('click-plus-active');
                },
                showLightBox() {
                    this.$emit('show-light-box');
                }
            },
            template: `
            <div class="tourCreate_item_block " id="active">
            <div class="tourCreate_item">
                    <div class="tourCreate_item_img">
                        <img src="images/vote/hotel.jpg" alt="">
                    </div>
                    <div class="tourCreate_item_text">
                        <h3>傳統採茶體驗</h3>
                        <p>整體設計以南歐莊園風格為主，風光明媚的山水以及豐富的人文及自然生態，將花蓮瑞穗美景盡收眼底。</p>
                        <div class="viewBtn">
                            <button class="viewBtn" @click="showLightBox()">預覽</button>
                        </div>
                    </div>
                    <div class="add"><img src="./images/tour/add.png" alt=""></div>
                    <div class="add" @click="storageActive(inputVlaue)"><img src="./images/tour/add.png" alt=""></div>
                </div>
                </div>
            `,

        });

        Vue.component("star-rating", VueStarRating.default, {
            methods: {
                setRating: function (rating) {
                    this.rating = "You have Selected: " + rating + " stars";
                },
                showCurrentRating: function (rating) {
                    this.currentRating =
                        rating === 0
                            ? this.currentSelectedRating
                            : "Click to select " + rating + " stars";
                },
                setCurrentSelectedRating: function (rating) {
                    this.currentSelectedRating =
                        "You have Selected: " + rating + " stars";
                }
            },
            data: {
                rating: "No Rating Selected",
                currentRating: "No Rating",
                currentSelectedRating: "No Current Rating",
                boundRating: 3,
            }
        });


        let tourCreate = new Vue({
            el: "#tourCreate",
            data: {
                showModal: false,
                showModal2: false,
                lightBox: false,
                ok: false,
                locationList: "",
                hotelList: "",
                restList1: "",
                restList2: "",
                restList3: "",
                activeList: "",
                content: "tea",
                title: "選擇茶園",
                bgcolor1: '#FFF',
                color1: '#4c6e39',
                bgcolor2: '#4c6e39',
                color2: '#FFF',
                bgcolor3: '#4c6e39',
                color3: '#FFF',
                bgcolor4: '#4c6e39',
                color4: '#FFF',
            },
            methods: {
                removeLocationStorage() {
                    this.content = 'tea';
                    storage.removeItem('location');
                    this.locationList = "";
                    storage.removeItem('hotel');
                    this.hotelList = "";
                    storage.removeItem('rest1');
                    storage.removeItem('rest2');
                    storage.removeItem('rest3');
                    this.restList1 = "";
                    this.restList2 = "";
                    this.restList3 = "";
                    storage.removeItem('active');
                    this.activeList = "";
                    this.ok = false;
                    this.title = "選擇茶園";
                    this.color1 = "#4c6e39";
                    this.bgcolor1 = "#fff";
                    this.color2 = "#fff";
                    this.bgcolor2 = "#4c6e39";
                    this.color3 = "#fff";
                    this.bgcolor3 = "#4c6e39";
                    this.color4 = "#fff";
                    this.bgcolor4 = "#4c6e39";
                },
                removeHotelStorage() {
                    this.content = 'hotel';
                    storage.removeItem('hotel');
                    this.hotelList = "";
                    storage.removeItem('rest1');
                    storage.removeItem('rest2');
                    storage.removeItem('rest3');
                    this.restList1 = "";
                    this.restList2 = "";
                    this.restList3 = "";
                    storage.removeItem('active');
                    this.activeList = "";
                    this.ok = false;
                    this.title = "選擇住宿";
                    this.color2 = "#4c6e39";
                    this.bgcolor2 = "#fff";
                    this.color1 = "#fff";
                    this.bgcolor1 = "#4c6e39";
                    this.color3 = "#fff";
                    this.bgcolor3 = "#4c6e39";
                    this.color4 = "#fff";
                    this.bgcolor4 = "#4c6e39";
                },
                removeRestStorage() {
                    this.content = 'rest';
                    storage.removeItem('rest1');
                    storage.removeItem('rest2');
                    storage.removeItem('rest3');
                    this.restList1 = "";
                    this.restList2 = "";
                    this.restList3 = "";
                    storage.removeItem('active');
                    this.activeList = "";
                    this.ok = false;
                    this.title = "選擇餐廳";
                    this.color3 = "#4c6e39";
                    this.bgcolor3 = "#fff";
                    this.color1 = "#fff";
                    this.bgcolor1 = "#4c6e39";
                    this.color2 = "#fff";
                    this.bgcolor2 = "#4c6e39";
                    this.color4 = "#fff";
                    this.bgcolor4 = "#4c6e39";
                },
                removeActiveStorage() {
                    this.content = 'active';
                    storage.removeItem('active');
                    this.activeList = "";
                    this.ok = false;
                    this.title = "選擇活動";
                    this.color4 = "#4c6e39";
                    this.bgcolor4 = "#fff";
                    this.color1 = "#fff";
                    this.bgcolor1 = "#4c6e39";
                    this.color2 = "#fff";
                    this.bgcolor2 = "#4c6e39";
                    this.color3 = "#fff";
                    this.bgcolor3 = "#4c6e39";
                },
                goToNext() {
                    this.activeList = storage.getItem('active');
                    this.ok = true;

                },
                goToActive() {
                    this.restList3 = storage.getItem('rest3');
                    this.content = 'active';
                    this.title = "選擇活動";

                    this.color4 = "#4c6e39";
                    this.bgcolor4 = "#fff";
                    this.color1 = "#fff";
                    this.bgcolor1 = "#4c6e39";
                    this.color2 = "#fff";
                    this.bgcolor2 = "#4c6e39";
                    this.color3 = "#fff";
                    this.bgcolor3 = "#4c6e39";

                },
                showRest1() {
                    this.restList1 = storage.getItem('rest1');
                },
                showRest2() {
                    this.restList2 = storage.getItem('rest2');
                },
                goToHotel() {
                    this.locationList = storage.getItem('location');
                    this.content = 'hotel';
                    this.title = "選擇住宿";
                    this.color2 = "#4c6e39";
                    this.bgcolor2 = "#fff";
                    this.color1 = "#fff";
                    this.bgcolor1 = "#4c6e39";

                    this.color3 = "#fff";
                    this.bgcolor3 = "#4c6e39";
                    this.color4 = "#fff";
                    this.bgcolor4 = "#4c6e39";
                },
                goToRest() {
                    this.hotelList = storage.getItem('hotel');
                    this.content = 'rest';
                    this.title = "選擇餐廳";
                    this.color3 = "#4c6e39";
                    this.bgcolor3 = "#fff";
                    this.color1 = "#fff";
                    this.bgcolor1 = "#4c6e39";
                    this.color2 = "#fff";
                    this.bgcolor2 = "#4c6e39";
                    this.color4 = "#fff";
                    this.bgcolor4 = "#4c6e39";
                },
                showBox() {
                    this.lightBox = true;
                },
                closeBox() {
                    this.lightBox = false;
                }

            },
            watch: {

            },
            computed: {//也是放函數，放在這裡的函數，不能傳參數，一定要有傳回值(return)
                t1styleChange() {
                    return {
                        backgroundColor: this.bgcolor1,
                        color: this.color1,
                    };
                },
                t2styleChange() {
                    return {
                        backgroundColor: this.bgcolor2,
                        color: this.color2,
                    };
                },
                t3styleChange() {
                    return {
                        backgroundColor: this.bgcolor3,
                        color: this.color3,
                    };
                },
                t4styleChange() {
                    return {
                        backgroundColor: this.bgcolor4,
                        color: this.color4,
                    };
                },
            },
            mounted() {
                this.locationList = storage.getItem('location');
                this.hotelList = storage.getItem('hotel');
                this.restList1 = storage.getItem('rest1');
                this.restList2 = storage.getItem('rest2');
                this.restList3 = storage.getItem('rest3');
                this.activeList = storage.getItem('active');
                if (storage.getItem('active')) {
                    this.content = "active";
                    this.ok = true;
                    this.title = "選擇活動";
                    this.color4 = "#4c6e39";
                    this.bgcolor4 = "#fff";
                    this.color1 = "#fff";
                    this.bgcolor1 = "#4c6e39";
                    this.color2 = "#fff";
                    this.bgcolor2 = "#4c6e39";
                    this.color3 = "#fff";
                    this.bgcolor3 = "#4c6e39";
                };



            },
        });
    </script>






    <script>



    </script>

    <!-- <script src="./js/01_tourCreate_addItem.js"></script> -->

</body>

</html>